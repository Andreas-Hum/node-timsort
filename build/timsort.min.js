!function(a,b){if("function"==typeof define&&define.amd)define("Timsort",["exports"],b);else if("undefined"!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.Timsort=c.exports}}(this,function(a){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b,c,g){if(!Array.isArray(a))throw new TypeError("Can only sort arrays");b?"function"!=typeof b&&(g=c,c=b,b=d):b=d,c||(c=0),g||(g=a.length);var i=g-c;if(!(2>i)){var j=0;if(k>i)return j=f(a,c,g,b),void h(a,c,g,c+j,b);var l=new n(a,b),m=e(i);do{if(j=f(a,c,g,b),m>j){var o=i;o>m&&(o=m),h(a,c,c+o,c+j,b),j=o}l.pushRun(c,j),l.mergeRuns(),i-=j,c+=j}while(0!==i);l.forceMergeRuns()}}function d(a,b){var c=String(a),d=String(b);return d>c?-1:c>d?1:0}function e(a){for(var b=0;a>=k;)b|=1&a,a>>=1;return a+b}function f(a,b,c,d){var e=b+1;if(e===c)return 1;if(d(a[e++],a[b])<0){for(;c>e&&d(a[e],a[e-1])<0;)e++;g(a,b,e)}else for(;c>e&&d(a[e],a[e-1])>=0;)e++;return e-b}function g(a,b,c){for(c--;c>b;){var d=a[b];a[b++]=a[c],a[c--]=d}}function h(a,b,c,d,e){for(d===b&&d++;c>d;d++){for(var f=a[d],g=b,h=d;h>g;){var i=g+h>>>1;e(f,a[i])<0?h=i:g=i+1}var j=d-g;switch(j){case 3:a[g+3]=a[g+2];case 2:a[g+2]=a[g+1];case 1:a[g+1]=a[g];break;default:for(;j>0;)a[g+j]=a[g+j-1],j--}a[g]=f}}function i(a,b,c,d,e,f){var g=0,h=0,i=1;if(f(a,b[c+e])>0){for(h=d-e;h>i&&f(a,b[c+e+i])>0;)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h),g+=e,i+=e}else{for(h=e+1;h>i&&f(a,b[c+e-i])<=0;)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h);var j=g;g=e-i,i=e-j}for(g++;i>g;){var k=g+(i-g>>>1);f(a,b[c+k])>0?g=k+1:i=k}return i}function j(a,b,c,d,e,f){var g=0,h=0,i=1;if(f(a,b[c+e])<0){for(h=e+1;h>i&&f(a,b[c+e-i])<0;)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h);var j=g;g=e-i,i=e-j}else{for(h=d-e;h>i&&f(a,b[c+e+i])>=0;)g=i,i=(i<<1)+1,0>=i&&(i=h);i>h&&(i=h),g+=e,i+=e}for(g++;i>g;){var k=g+(i-g>>>1);f(a,b[c+k])<0?i=k:g=k+1}return i}a.__esModule=!0,a.sort=c;var k=32,l=7,m=256,n=function(){function a(c,d){b(this,a),this.array=null,this.compare=null,this.minGallop=l,this.length=0,this.tmpStorageLength=m,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=c,this.compare=d,this.length=c.length,this.length<2*m&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return a.prototype.pushRun=function(a,b){this.runStart[this.stackSize]=a,this.runLength[this.stackSize]=b,this.stackSize+=1},a.prototype.mergeRuns=function(){for(;this.stackSize>1;){var a=this.stackSize-2;if(a>=1&&this.runLength[a-1]<=this.runLength[a]+this.runLength[a+1]||a>=2&&this.runLength[a-2]<=this.runLength[a]+this.runLength[a-1])this.runLength[a-1]<this.runLength[a+1]&&a--;else if(this.runLength[a]>this.runLength[a+1])break;this.mergeAt(a)}},a.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var a=this.stackSize-2;a>0&&this.runLength[a-1]<this.runLength[a+1]&&a--,this.mergeAt(a)}},a.prototype.mergeAt=function(a){var b=this.compare,c=this.array,d=this.runStart[a],e=this.runLength[a],f=this.runStart[a+1],g=this.runLength[a+1];this.runLength[a]=e+g,a===this.stackSize-3&&(this.runStart[a+1]=this.runStart[a+2],this.runLength[a+1]=this.runLength[a+2]),this.stackSize--;var h=j(c[f],c,d,e,0,b);d+=h,e-=h,0!==e&&(g=i(c[d+e-1],c,f,g,g-1,b),0!==g&&(g>=e?this.mergeLow(d,e,f,g):this.mergeHigh(d,e,f,g)))},a.prototype.mergeLow=function(a,b,c,d){var e=this.compare,f=this.array,g=this.tmp,h=0;for(h=0;b>h;h++)g[h]=f[a+h];var k=0,m=c,n=a;if(f[n++]=f[m++],0!==--d){if(1===b){for(h=0;d>h;h++)f[n+h]=f[m+h];return void(f[n+d]=g[k])}for(var o=this.minGallop;;){var p=0,q=0,r=!1;do if(e(f[m],g[k])<0){if(f[n++]=f[m++],q++,p=0,0===--d){r=!0;break}}else if(f[n++]=g[k++],p++,q=0,1===--b){r=!0;break}while(o>(p|q));if(r)break;do{if(p=j(f[m],g,k,b,0,e),0!==p){for(h=0;p>h;h++)f[n+h]=g[k+h];if(n+=p,k+=p,b-=p,1>=b){r=!0;break}}if(f[n++]=f[m++],0===--d){r=!0;break}if(q=i(g[k],f,m,d,0,e),0!==q){for(h=0;q>h;h++)f[n+h]=f[m+h];if(n+=q,m+=q,d-=q,0===d){r=!0;break}}if(f[n++]=g[k++],1===--b){r=!0;break}o--}while(p>=l||q>=l);if(r)break;0>o&&(o=0),o+=2}if(this.minGallop=o,1>o&&(this.minGallop=1),1===b){for(h=0;d>h;h++)f[n+h]=f[m+h];f[n+d]=g[k]}else{if(0===b)throw new Error("mergeLow preconditions were not respected");for(h=0;b>h;h++)f[n+h]=g[k+h]}}else for(h=0;b>h;h++)f[n+h]=g[k+h]},a.prototype.mergeHigh=function(a,b,c,d){var e=this.compare,f=this.array,g=this.tmp,h=0;for(h=0;d>h;h++)g[h]=f[c+h];var k=a+b-1,m=d-1,n=c+d-1,o=0,p=0;if(f[n--]=f[k--],0!==--b){if(1===d){for(n-=b,k-=b,p=n+1,o=k+1,h=b-1;h>=0;h--)f[p+h]=f[o+h];return void(f[n]=g[m])}for(var q=this.minGallop;;){var r=0,s=0,t=!1;do if(e(g[m],f[k])<0){if(f[n--]=f[k--],r++,s=0,0===--b){t=!0;break}}else if(f[n--]=g[m--],s++,r=0,1===--d){t=!0;break}while(q>(r|s));if(t)break;do{if(r=b-j(g[m],f,a,b,b-1,e),0!==r){for(n-=r,k-=r,b-=r,p=n+1,o=k+1,h=r-1;h>=0;h--)f[p+h]=f[o+h];if(0===b){t=!0;break}}if(f[n--]=g[m--],1===--d){t=!0;break}if(s=d-i(f[k],g,0,d,d-1,e),0!==s){for(n-=s,m-=s,d-=s,p=n+1,o=m+1,h=0;s>h;h++)f[p+h]=g[o+h];if(1>=d){t=!0;break}}if(f[n--]=f[k--],0===--b){t=!0;break}q--}while(r>=l||s>=l);if(t)break;0>q&&(q=0),q+=2}if(this.minGallop=q,1>q&&(this.minGallop=1),1===d){for(n-=b,k-=b,p=n+1,o=k+1,h=b-1;h>=0;h--)f[p+h]=f[o+h];f[n]=g[m]}else{if(0===d)throw new Error("mergeHigh preconditions were not respected");for(o=n-(d-1),h=0;d>h;h++)f[o+h]=g[h]}}else for(o=n-(d-1),h=0;d>h;h++)f[o+h]=g[h]},a}()});